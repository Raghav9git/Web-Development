<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>View Incidents | SafeNet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="favicon.png">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif}

body{
  min-height:100vh;
  background:
    radial-gradient(circle at 20% 20%, #1b2a5a 0%, transparent 40%),
    radial-gradient(circle at 80% 10%, #3b1d6b 0%, transparent 45%),
    linear-gradient(180deg, #060814, #0b1020 60%, #05060f);
  color:#e5e7eb;
  padding-top:90px;
}

/* NAVBAR */
nav{
  position:fixed;top:0;left:0;width:100%;z-index:1000;
  display:flex;justify-content:center;flex-wrap:wrap;gap:22px;
  padding:14px 20px;
  background:rgba(8,12,30,.75);
  border-bottom:1px solid rgba(255,255,255,.08);
}
nav a{color:#dbeafe;text-decoration:none;position:relative;padding-bottom:6px}
nav a::after{content:"";position:absolute;left:0;bottom:0;width:0;height:2px;
  background:linear-gradient(90deg,#38bdf8,#a78bfa);transition:.35s}
nav a:hover::after,nav a.active::after{width:100%}

/* CONTROLS */
.controls{
  display:flex;justify-content:center;gap:28px;flex-wrap:wrap;margin:20px;
}
.control-group{
  background:rgba(2,6,23,.75);
  border:1px solid rgba(255,255,255,.08);
  border-radius:16px;padding:12px 16px;
}
.control-group h3{
  font-size:14px;margin-bottom:8px;color:#c7d2fe;text-align:center
}
.control-group button{
  margin:4px;padding:8px 14px;border-radius:12px;border:none;
  background:linear-gradient(135deg,#1e3a8a,#4c1d95);
  color:#fff;cursor:pointer;
}

/* MAP CARD */
.page{display:flex;justify-content:center;padding:20px}
.card{
  width:100%;max-width:1100px;
  background:rgba(15,23,42,.9);
  border-radius:22px;
  padding:22px;
  border:1px solid rgba(255,255,255,.08);
}
#map{height:520px;border-radius:18px;border:1px solid rgba(255,255,255,.15)}
.info{margin-top:10px;font-size:14px;color:#c7d2fe}

/* RESOURCE TRACKING */
.resources{
  margin-top:18px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:16px;
}
.resource-card{
  background:linear-gradient(135deg,#1a1f3a,#0e1327);
  border-radius:16px;
  padding:14px;
}
.resource-card h4{margin-bottom:6px}

/* INCIDENT ARCHIVE */
.archive{
  max-width:1100px;
  margin:40px auto;
  padding:0 20px;
}
.archive h2{
  text-align:center;
  margin-bottom:20px;
  background:linear-gradient(90deg,#ff5cff,#8b7cff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.filters{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:16px;margin-bottom:24px;
}
.filters select,.filters input{
  padding:10px;border-radius:12px;
  border:none;background:#141428;color:#fff;
}
.incident-list{display:none;gap:16px}
.incident-card{
  background:linear-gradient(135deg,#1a1f3a,#0e1327);
  border-radius:16px;padding:14px;
}
.tags{display:flex;gap:8px;margin-bottom:6px}
.tag{font-size:.7rem;padding:4px 10px;border-radius:999px}
.low{background:#2b6b3f}
.medium{background:#b8871a}
.extreme{background:#7a1f1f}
.type{background:#1c1c3b}

.archive-btn{
  margin:30px auto 0;
  display:none;
  padding:14px 32px;
  border:none;border-radius:999px;
  background:linear-gradient(90deg,#ff5cff,#8b7cff);
  color:#fff;cursor:pointer;
}
</style>
</head>

<body>

<nav>
  <a href="report.html">Report</a>
  <a href="home.html">Home</a>
  <a href="profile.html">Profile</a>
  <a href="settings.html">Settings</a>
  <a href="analytics.html">Analytics</a>
  <a href="your safety.html">Your Safety</a>
  <a href="want to help.html">Want To Help?</a>
  <a href="community response.html">Community Response</a>
  <a href="services.html">Services</a>
  <a class="active" href="view-incidents.html">View Incidents</a>
</nav>

<!-- MAP CONTROLS -->
<div class="controls">
  <div class="control-group">
    <h3>Weather Maps</h3>
    <button onclick="selectMap('Temperature')">Temperature</button>
    <button onclick="selectMap('Rain')">Rain / Storm</button>
  </div>
  <div class="control-group">
    <h3>Incident / Disaster Maps</h3>
    <button onclick="selectMap('VehicleAccident')">Vehicle Accidents</button>
    <button onclick="selectMap('IndustrialAccident')">Industrial Accidents</button>
  </div>
</div>

<!-- MAP -->
<div class="page">
  <div class="card">
    <div id="map"></div>
    <div class="info" id="infoText">Select a map type, then click on the map</div>

    <div class="resources">
      <div class="resource-card"><h4>üöë Ambulance</h4>Status: <b>On the way</b></div>
      <div class="resource-card"><h4>üöí Fire Brigade</h4>Status: <b>Reached</b></div>
      <div class="resource-card"><h4>üè† Shelter</h4>Status: <b>Available</b></div>
    </div>
  </div>
</div>

<!-- INCIDENT ARCHIVE -->
<div class="archive">
  <h2>Incident Archive</h2>

  <div class="filters">
    <select><option>State</option></select>
    <select><option>District</option></select>
    <select><option>City</option></select>
    <select><option>Road</option></select>
    <input type="date">
    <select><option>Type</option></select>
    <select><option>Severity</option></select>
    <select><option>Status</option></select>
  </div>

  <div class="incident-list" id="incidentList"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
let map = L.map("map").setView([19.076,72.8777],10);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

let selectedMapType = null;
let simulatedLayer = [];

function selectMap(type){
  selectedMapType = type;
  document.getElementById("infoText").innerText =
    "Map mode: " + type + " | Click on map to simulate incident";
}

function clearSimulated(){
  simulatedLayer.forEach(l => map.removeLayer(l));
  simulatedLayer = [];
}

map.on("click", e => {
  if(!selectedMapType) return;

  clearSimulated();

  let radius = 0;
  let color = "#38bdf8";
  let popupText = "";

  switch(selectedMapType){
    case "Temperature":
      radius = 1500;
      color = "#f97316";
      popupText = "üå° High Temperature Zone";
      break;
    case "Rain":
      radius = 2000;
      color = "#38bdf8";
      popupText = "üåß Heavy Rain / Storm Area";
      break;
    case "VehicleAccident":
      radius = 800;
      color = "#ef4444";
      popupText = "üöó Vehicle Accident Reported";
      break;
    case "IndustrialAccident":
      radius = 1200;
      color = "#a855f7";
      popupText = "üè≠ Industrial Accident Zone";
      break;
  }

  const marker = L.marker(e.latlng).addTo(map);
  const circle = L.circle(e.latlng,{
    radius,
    color,
    fillColor:color,
    fillOpacity:0.3
  }).addTo(map);

  marker.bindPopup(popupText).openPopup();

  simulatedLayer.push(marker,circle);
});
</script>

</body>
</html>
